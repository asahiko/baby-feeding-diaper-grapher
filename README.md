# Baby Feeding & Diaper Grapher

赤ちゃんの授乳・おむつ記録を可視化するPythonスクリプト（独自のデータ形式を入力とする自分用）

作者夫婦は産院での紙による記録形式を引き継いで退院後も紙による記録を継続したため、授乳・おむつ替えの記録をグラフにしようと思ったときにはその記録をデジタルデータとして書き写す必要があった。
そこで、まず紙からの書き写しやすさを優先した独自の表形式を定義し、本スクリプトでパース・可視化することにした。この形式はExcelを用いて一覧性よく記録することを優先した作りとなっている。

> [!NOTE]
> 一般的には適当な授乳アプリを用いて記録し、そのアプリ内蔵の機能によって可視化する方が簡単と思われる。
> ただ我々にとって紙による記録は、産院で一旦慣れた方法を継続できるため障壁が低かったことに加え、育児最初期の慌ただしい時期に、アプリの選定やアカウントの設定などの下準備を必要としないメリットがあった。（最初期は可視化よりもとりあえず世話をすることが優先されたのは言うまでもない。）

## 準備

- Python 3.10以上
- 必要ライブラリ: pandas, matplotlib, japanize-matplotlib

## 使い方

```bash
python babyplot.py --file data/data.xlsx
```

- `-f`, `--file` 入力ファイル (.xlsx|.csv)。未指定時はハードコードされたダミーデータで動作する。
- `-p`, `--plotter` プロットに使うライブラリ（現在はmatplotlibのみに対応）

## データ形式

下記のいずれか:

- A1セルから開始し、n行6列の表を含むワークシート1枚からなるExcelワークブック
- n行6列のCSV

1行1日。各列のヘッダーとデータ形式は下記の通り: 

### date

日付

### breast

直接母乳を与えた時刻と、授乳時間 (分) の一覧 (スペース区切り)

例: 
- 3 6 9△ 11 14 15 20 22 23
  - 3時台, 6時台, 9時台は短かった, 11時台, ...

- 2:00R15 7:15L10R10 9L10R10 ... 
  - 2:00に右を15分、7:15に左右10分ずつ、9時に左右10分ずつ, ...


元の紙の表が毎時1マスの形式なので、時刻の粒度は高くない。分を省略した記法に対応させたのはそのためであり、その場合パーサーは "9" を 9:30 と解釈する。

左右や授乳時間 (分) の記録は任意（最初は行っていなかった）。

定型記法の後には△など、空白文字以外で任意の備考を記すことができ、内部的にはDataFrameのNote列に記録されるが、プロットの際は無視される。

### pumped

搾乳された母乳を与えた時刻と、授乳量 (ml) の一覧 (スペース区切り)

例:

- 13-20 (13時台に20 ml)
- 18:15-40 (18:15に40 ml)

### formula

粉ミルクを与えた時刻と、授乳量 (ml) の一覧 (スペース区切り)

データの記法は pumped に同じ。

### urine

おしっこのためおむつを替えた時刻の一覧 (スペース区切り)

例: 

- 4 7 9 10:00 11 14 15 16 17 19:00 19:45 21

### stool

うんちのためおむつを替えた時刻の一覧 (スペース区切り)

- 0 7:15 14:15 14:45△ 18△ 22

△は量が少なかったことを示す。内部的にはDataFrameのNote列に記録されるが、プロットの際は無視される。
